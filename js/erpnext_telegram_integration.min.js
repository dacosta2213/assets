!function(){"use strict";$(document).on("app_ready",function(){var e=frappe.get_route();"Form"==e[0]&&frappe.ui.form.on(e[1],{refresh:function(e){cur_frm.page.add_menu_item(__("Send To Telegram"),function(){frappe.user.name;var e=frappe.session.user_fullname,t=cur_frm.doctype,a=cur_frm.docname,r=new frappe.ui.Dialog({fields:[{fieldname:"ht",fieldtype:"HTML"},{label:"Send To",fieldname:"telegram_user",reqd:1,fieldtype:"Link",options:"Telegram User Settings"},{label:"Subject",fieldname:"subject",reqd:1,fieldtype:"Data",default:cur_frm.doc.name},{label:"Message",fieldname:"message",reqd:1,fieldtype:"SmallText"},{label:"Attach Document Print",fieldname:"attach_document_print",fieldtype:"Check"}],primary_action_label:"Send",title:"Send a Telegram Message",primary_action:function(){var n=r.get_values();if(n){var m="From : "+e+"\n\n"+n.subject+"\n\n"+n.message;frappe.call({method:"erpnext_telegram_integration.erpnext_telegram_integration.doctype.telegram_settings.telegram_settings.send_to_telegram",args:{telegram_user:n.telegram_user,message:m,reference_doctype:t,reference_name:a,attachment:n.attach_document_print},freeze:!0,callback:function(e){frappe.msgprint(__("Successfully Sent to: "+n.telegram_user)),r.hide()}});var l="To : "+n.telegram_user+"\n\n"+n.message;frappe.call({method:"frappe.desk.form.utils.add_comment",args:{reference_doctype:t,reference_name:a,content:l,comment_email:frappe.session.user}})}},no_submit_on_enter:!0});r.fields_dict.ht.$wrapper.html(a),r.show()})}})})}();
//# sourceMappingURL=erpnext_telegram_integration.min.js.map
